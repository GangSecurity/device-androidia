{
    "flash": {
        "commands": [
            {
                "args": "flashing unlock", 
                "description": "Set device state to unlocked", 
                "mandatory": true, 
                "restrict": [
                    "update_gr_mrb_b1"
                ], 
                "retry": 1, 
                "timeout": 60000, 
                "tool": "fastboot"
            }, 
            {
                "defaultValue": "_a", 
                "description": "Get the active slot", 
                "mandatory": false, 
                "restrict": [
                    "update_gr_mrb_b1"
                ], 
                "tool": "setVariable", 
                "variable": "slot"
            }, 
            {
                "args": "--set-active=${slot}", 
                "description": "Set the active slot", 
                "mandatory": true, 
                "restrict": [
                    "update_gr_mrb_b1"
                ], 
                "retry": 1, 
                "timeout": 60000, 
                "tool": "fastboot"
            }, 
            {
                "args": "flash system_a ${system}", 
                "block_scan": true, 
                "description": "Flash system_a partition", 
                "mandatory": true, 
                "restrict": [
                    "update_gr_mrb_b1"
                ], 
                "retry": 1, 
                "timeout": 600000, 
                "tool": "fastboot"
            }, 
            {
                "args": "flash vendor_a ${vendor}", 
                "block_scan": true, 
                "description": "Flash vendor_a partition", 
                "mandatory": true, 
                "restrict": [
                    "update_gr_mrb_b1"
                ], 
                "retry": 1, 
                "timeout": 600000, 
                "tool": "fastboot"
            }, 
            {
                "args": "flash vbmeta_a ${vbmeta}", 
                "description": "Flash vbmeta_a partition", 
                "mandatory": true, 
                "restrict": [
                    "update_gr_mrb_b1"
                ], 
                "retry": 1, 
                "timeout": 60000, 
                "tool": "fastboot"
            }, 
            {
                "args": "flash tos_a ${tos}", 
                "description": "Flash tos_a partition", 
                "mandatory": true, 
                "restrict": [
                    "update_gr_mrb_b1"
                ], 
                "retry": 1, 
                "timeout": 60000, 
                "tool": "fastboot"
            }, 
            {
                "args": "flash tos_b ${tos}", 
                "description": "Flash tos_b partition", 
                "mandatory": true, 
                "restrict": [
                    "update_gr_mrb_b1"
                ], 
                "retry": 1, 
                "timeout": 60000, 
                "tool": "fastboot"
            }, 
            {
                "args": "flash bootloader_a ${bootloader}", 
                "description": "Flash bootloader_a partition", 
                "mandatory": true, 
                "restrict": [
                    "update_gr_mrb_b1"
                ], 
                "retry": 1, 
                "timeout": 600000, 
                "tool": "fastboot"
            }, 
            {
                "args": "flash boot_a ${boot}", 
                "description": "Flash boot_a partition", 
                "mandatory": true, 
                "restrict": [
                    "update_gr_mrb_b1"
                ], 
                "retry": 1, 
                "timeout": 60000, 
                "tool": "fastboot"
            }, 
            {
                "args": "oem rm /ESP/BIOSUPDATE.FV", 
                "description": "Delete firmware capsule", 
                "group": "delete-capsule", 
                "mandatory": true, 
                "restrict": [
                    "update_gr_mrb_b1"
                ], 
                "retry": 1, 
                "timeout": 60000, 
                "tool": "fastboot"
            }, 
            {
                "args": "flashing lock", 
                "description": "Set device state to locked", 
                "group": "lock-device", 
                "mandatory": true, 
                "restrict": [
                    "update_gr_mrb_b1"
                ], 
                "retry": 1, 
                "timeout": 60000, 
                "tool": "fastboot"
            }, 
            {
                "args": "continue", 
                "description": "Boot to main OS", 
                "mandatory": true, 
                "restrict": [
                    "update_gr_mrb_b1"
                ], 
                "retry": 1, 
                "timeout": 60000, 
                "tool": "fastboot"
            }, 
            {
                "args": "flashing unlock", 
                "description": "Set device state to unlocked", 
                "mandatory": true, 
                "restrict": [
                    "blank_gr_mrb_b1"
                ], 
                "retry": 1, 
                "timeout": 60000, 
                "tool": "fastboot"
            }, 
            {
                "args": "flash gpt ${gpt}", 
                "description": "Initialize the partition table", 
                "mandatory": true, 
                "restrict": [
                    "blank_gr_mrb_b1"
                ], 
                "retry": 1, 
                "timeout": 60000, 
                "tool": "fastboot"
            }, 
            {
                "args": "erase teedata", 
                "description": "Erase teedata partition", 
                "mandatory": true, 
                "restrict": [
                    "blank_gr_mrb_b1"
                ], 
                "retry": 1, 
                "timeout": 60000, 
                "tool": "fastboot"
            }, 
            {
                "args": "erase misc", 
                "description": "Erase misc partition", 
                "mandatory": true, 
                "restrict": [
                    "blank_gr_mrb_b1"
                ], 
                "retry": 1, 
                "timeout": 60000, 
                "tool": "fastboot"
            }, 
            {
                "args": "erase persistent", 
                "description": "Erase persistent partition", 
                "mandatory": true, 
                "restrict": [
                    "blank_gr_mrb_b1"
                ], 
                "retry": 1, 
                "timeout": 60000, 
                "tool": "fastboot"
            }, 
            {
                "args": "erase metadata", 
                "description": "Erase metadata partition", 
                "mandatory": true, 
                "restrict": [
                    "blank_gr_mrb_b1"
                ], 
                "retry": 1, 
                "timeout": 60000, 
                "tool": "fastboot"
            }, 
            {
                "args": "format data", 
                "block_scan": true, 
                "description": "Format data partition", 
                "mandatory": true, 
                "restrict": [
                    "blank_gr_mrb_b1"
                ], 
                "retry": 1, 
                "timeout": 6000000, 
                "tool": "fastboot"
            }, 
            {
                "args": "format config", 
                "description": "Format config partition", 
                "mandatory": true, 
                "restrict": [
                    "blank_gr_mrb_b1"
                ], 
                "retry": 1, 
                "timeout": 60000, 
                "tool": "fastboot"
            }, 
            {
                "args": "flash system_a ${system}", 
                "block_scan": true, 
                "description": "Flash system_a partition", 
                "mandatory": true, 
                "restrict": [
                    "blank_gr_mrb_b1"
                ], 
                "retry": 1, 
                "timeout": 600000, 
                "tool": "fastboot"
            }, 
            {
                "args": "flash vendor_a ${vendor}", 
                "block_scan": true, 
                "description": "Flash vendor_a partition", 
                "mandatory": true, 
                "restrict": [
                    "blank_gr_mrb_b1"
                ], 
                "retry": 1, 
                "timeout": 600000, 
                "tool": "fastboot"
            }, 
            {
                "args": "flash vbmeta_a ${vbmeta}", 
                "description": "Flash vbmeta_a partition", 
                "mandatory": true, 
                "restrict": [
                    "blank_gr_mrb_b1"
                ], 
                "retry": 1, 
                "timeout": 60000, 
                "tool": "fastboot"
            }, 
            {
                "args": "flash tos_a ${tos}", 
                "description": "Flash tos_a partition", 
                "mandatory": true, 
                "restrict": [
                    "blank_gr_mrb_b1"
                ], 
                "retry": 1, 
                "timeout": 60000, 
                "tool": "fastboot"
            }, 
            {
                "args": "flash tos_b ${tos}", 
                "description": "Flash tos_b partition", 
                "mandatory": true, 
                "restrict": [
                    "blank_gr_mrb_b1"
                ], 
                "retry": 1, 
                "timeout": 60000, 
                "tool": "fastboot"
            }, 
            {
                "args": "flash bootloader_a ${bootloader}", 
                "description": "Flash bootloader_a partition", 
                "mandatory": true, 
                "restrict": [
                    "blank_gr_mrb_b1"
                ], 
                "retry": 1, 
                "timeout": 600000, 
                "tool": "fastboot"
            }, 
            {
                "args": "flash boot_a ${boot}", 
                "description": "Flash boot_a partition", 
                "mandatory": true, 
                "restrict": [
                    "blank_gr_mrb_b1"
                ], 
                "retry": 1, 
                "timeout": 60000, 
                "tool": "fastboot"
            }, 
            {
                "args": "oem rm /ESP/BIOSUPDATE.FV", 
                "description": "Delete firmware capsule", 
                "group": "delete-capsule", 
                "mandatory": true, 
                "restrict": [
                    "blank_gr_mrb_b1"
                ], 
                "retry": 1, 
                "timeout": 60000, 
                "tool": "fastboot"
            }, 
            {
                "defaultValue": "_a", 
                "description": "Get the active slot", 
                "mandatory": false, 
                "restrict": [
                    "blank_gr_mrb_b1"
                ], 
                "tool": "setVariable", 
                "variable": "slot"
            }, 
            {
                "args": "--set-active=${slot}", 
                "description": "Set the active slot", 
                "mandatory": true, 
                "restrict": [
                    "blank_gr_mrb_b1"
                ], 
                "retry": 1, 
                "timeout": 60000, 
                "tool": "fastboot"
            }, 
            {
                "args": "flashing lock", 
                "description": "Set device state to locked", 
                "group": "lock-device", 
                "mandatory": true, 
                "restrict": [
                    "blank_gr_mrb_b1"
                ], 
                "retry": 1, 
                "timeout": 60000, 
                "tool": "fastboot"
            }, 
            {
                "args": "continue", 
                "description": "Boot to main OS", 
                "mandatory": true, 
                "restrict": [
                    "blank_gr_mrb_b1"
                ], 
                "retry": 1, 
                "timeout": 60000, 
                "tool": "fastboot"
            }
        ], 
        "configurations": {
            "blank_gr_mrb_b1": {
                "brief": "blank", 
                "description": "erase and flash all partitions, all data will be lost.", 
                "groupsState": {
                    "delete-capsule": false, 
                    "lock-device": true
                }, 
                "name": "blank_gr_mrb_b1", 
                "parameters": {
                    "bootloader": "gr_mrb_b1", 
                    "gpt": "gr_mrb_b1"
                }, 
                "startState": "pos"
            }, 
            "update_gr_mrb_b1": {
                "brief": "update", 
                "default": true, 
                "description": "update phone to new release", 
                "groupsState": {
                    "delete-capsule": false, 
                    "lock-device": true
                }, 
                "name": "update_gr_mrb_b1", 
                "parameters": {
                    "bootloader": "gr_mrb_b1", 
                    "gpt": "gr_mrb_b1"
                }, 
                "startState": "pos"
            }
        }, 
        "groups": {
            "delete-capsule": {
                "description": "Disable capsule update by deleting the capsule file from the ESP partition", 
                "name": "Disable capsule update"
            }, 
            "lock-device": {
                "description": "Put the device in locked state at the end of the flash procedure.", 
                "name": "Lock the device (it implies the userdata partition wipe)"
            }
        }, 
        "osplatform": "android", 
        "parameters": {
            "boot": {
                "description": "boot.img", 
                "name": "boot", 
                "type": "file", 
                "value": "boot.img"
            }, 
            "bootloader": {
                "name": "bootloader", 
                "options": {
                    "gr_mrb_b1": {
                        "description": "bootloader_gr_mrb_b1", 
                        "value": "bootloader_gr_mrb_b1"
                    }
                }, 
                "type": "file"
            }, 
            "gpt": {
                "name": "gpt", 
                "options": {
                    "gr_mrb_b1": {
                        "description": "gpt_gr_mrb_b1.bin", 
                        "value": "gpt_gr_mrb_b1.bin"
                    }
                }, 
                "type": "file"
            }, 
            "slot": {
                "computedValue": "$1", 
                "description": "Get current slot", 
                "filter": "current-slot:[\\s]*(_[a-z]+)", 
                "name": "slot", 
                "subCommand": {
                    "args": "getvar current-slot", 
                    "description": "Get current slot", 
                    "mandatory": true, 
                    "retry": 1, 
                    "timeout": 60000, 
                    "tool": "fastboot"
                }, 
                "type": "variable", 
                "value": "_a"
            }, 
            "system": {
                "description": "system.img", 
                "name": "system", 
                "type": "file", 
                "value": "system.img"
            }, 
            "tos": {
                "description": "tos.img", 
                "name": "tos", 
                "type": "file", 
                "value": "tos.img"
            }, 
            "vbmeta": {
                "description": "vbmeta.img", 
                "name": "vbmeta", 
                "type": "file", 
                "value": "vbmeta.img"
            }, 
            "vendor": {
                "description": "vendor.img", 
                "name": "vendor", 
                "type": "file", 
                "value": "vendor.img"
            }
        }, 
        "version": "3.0"
    }
}