<?xml version="1.0" encoding="UTF-8"?>
<ComponentLibrary xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="../../../Schemas/ComponentLibrary.xsd">
    <ComponentTypeSet>

    <ComponentType Name="AudioPins">
      <!-- Pipeline pins -->
      <!-- Input pins -->
      <Component Name="pipe_media_in" Type="AudioInputPin" Mapping="Channels:2"/>
      <Component Name="pipe_navigation_in" Type="AudioInputPin" Mapping="Channels:2"/>
      <Component Name="pipe_hmi_in" Type="AudioInputPin" Mapping="Channels:2"/>
      <!-- Output pins -->
      <Component Name="pipe_out" Type="AudioOutputPin" Mapping="Channels:4"/>

      <!-- IasMixer pins -->
      <!-- Input pins -->
      <Component Name="mix_media_in" Type="AudioInputPin" Mapping="Channels:2"/>
      <Component Name="mix_navigation_in" Type="AudioInputPin" Mapping="Channels:2"/>
      <Component Name="mix_hmi_in" Type="AudioInputPin" Mapping="Channels:2"/>
      <!-- Output pins -->
      <Component Name="mix_out" Type="AudioOutputPin" Mapping="Channels:4"/>

      <!-- IasVolume pins -->
      <Component Name="vol_media" Type="AudioInOutPin" Mapping="Channels:2"/>
      <Component Name="vol_navigation" Type="AudioInOutPin" Mapping="Channels:2"/>
      <Component Name="vol_hmi" Type="AudioInOutPin" Mapping="Channels:2"/>
    </ComponentType>

    <ComponentType Name="Pipelines">
      <Component Name="amp_pipe" Type="Pipeline"
        Mapping="SampleRate:48000,Channels:4,PeriodSize:192,InputPins:pipe_media_in|pipe_navigation_in|pipe_hmi_in,OutputPins:pipe_out"/>
    </ComponentType>

    <ComponentType Name="MixerAmpRuntimeProperties" Extends="IasMixerModule">
        <Component Name="mix_media_in" Type="MixerInputPinProperties" Mapping="Amend1:mix_media_in"/>
        <Component Name="mix_navigation_in" Type="MixerInputPinProperties" Mapping="Amend1:mix_navigation_in"/>
        <Component Name="mix_hmi_in" Type="MixerInputPinProperties" Mapping="Amend1:mix_hmi_in"/>
    </ComponentType>

    <ComponentType Name="AudioProcessingModules">
      <Component Name="ias_mixer_amp" Type="MixerAmpRuntimeProperties"
                 Mapping="ModuleInstance:ias_mixer_amp,BelongsTo:amp_pipe,PinsMapping:mix_media_in->mix_out|mix_navigation_in->mix_out|mix_hmi_in->mix_out"/>
    </ComponentType>

    <ComponentType Name="VolumeMediaAmp" Extends="IasVolumeModule">
        <Component Name="media" Type="VolumeControlProperty" Mapping="Amend1:vol_media"/>
        <Component Name="navigation" Type="VolumeControlProperty" Mapping="Amend1:vol_navigation"/>
        <Component Name="hmi" Type="VolumeControlProperty" Mapping="Amend1:vol_hmi"/>
    </ComponentType>

    <ComponentType Name="AudioProcessingInPlaceModules">
        <Component Name="ias_volume_amp" Type="VolumeMediaAmp"
                   Mapping="ModuleInstance:ias_volume_media_amp,BelongsTo:amp_pipe,InOutPins:vol_media|vol_navigation|vol_hmi,Properties:numFilterBands(Int32)=1"/>
    </ComponentType>

    <ComponentType Name="InnerPipelineLinks">
      <Component Name="amp_pipe" Type="InnerPipelineLink"
                 Mapping="PipelineName:amp_pipe,Links:pipe_media_in->vol_media|vol_media->mix_media_in|pipe_navigation_in->vol_navigation|vol_navigation->mix_navigation_in|pipe_hmi_in->vol_hmi|vol_hmi->mix_hmi_in|mix_out->pipe_out"/>
    </ComponentType>
  </ComponentTypeSet>
</ComponentLibrary>
