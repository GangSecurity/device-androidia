<?xml version="1.0" encoding="UTF-8"?>
<Subsystem xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:xi="http://www.w3.org/2001/XInclude"
    xsi:noNamespaceSchemaLocation="../../Schemas/Subsystem.xsd"
    Name="sst" Type="ALSA_CUSTOM"
    Mapping="Card:@SOUND_CARD_NAME@">

    <ComponentLibrary>
        <!-- enums parameters definition -->

        <ComponentType Name="StateOnOff">
          <EnumParameter Name="mode" Size="8" Mapping="Control:%1">
            <ValuePair Literal="on" Numerical="1"/>
            <ValuePair Literal="off" Numerical="0"/>
          </EnumParameter>
        </ComponentType>

        <ComponentType Name="BtHfpBandType">
          <EnumParameter Name="mode" Size="8" Mapping="Control:%1">
            <ValuePair Literal="narrow-band" Numerical="0"/>
            <ValuePair Literal="wide-band" Numerical="1"/>
          </EnumParameter>
        </ComponentType>

        <!-- Mixers definition -->
        <ComponentType Name="MainMixerIn">
            <!-- Top mixers -->
            <BooleanParameter Name="pcm_regular" Mapping="Control:%1 media_in mi Switch"/>

            <!-- Bottom mixers -->
            <BooleanParameter Name="modem" Mapping="Control:%1 modem_pt_cp mi Switch"/>
            <BooleanParameter Name="media3" Mapping="Control:%1 media3_in mi Switch"/>
        </ComponentType>

        <ComponentType Name="MainMixerOut">
            <Component Name="mix" Type="MainMixerIn"/>
        </ComponentType>

        <!-- Main Mixer -->
        <ComponentType Name="MainMixerMatrix">
            <!-- Bottom mixers -->
            <BooleanParameter Name="ihf_switch" Mapping="Control:'Speaker Switch'"/>
            <Component Name="ihf" Type="MainMixerOut" Mapping="Amend1:codec0_out mo"/>

            <Component Name="modem" Type="MainMixerOut" Mapping="Amend1:modem_pt_pb mo"/>
            <Component Name="media2" Type="MainMixerOut" Mapping="Amend1:media2_out mo"/>

            <Component Name="bt_hfp_in" Type="BtHfpBandType" Mapping="Amend1:BtHfp_ssp0_in pcm cfg"/>
            <Component Name="bt_hfp_out" Type="BtHfpBandType" Mapping="Amend1:BtHfp_ssp0_out pcm cfg"/>

            <Component Name="dirana_in_ramp_type" Type="StateOnOff" Mapping="Amend1:dirana_in gain 1 Ramp Type"/>
            <Component Name="dirana_aux_in_ramp_type" Type="StateOnOff" Mapping="Amend1:dirana_aux_in gain 4 Ramp Type"/>
            <Component Name="dirana_tuner_in_ramp_type" Type="StateOnOff" Mapping="Amend1:dirana_tuner_in gain 5 Ramp Type"/>

            <!-- Duration of curve expressed in hundreds of nanoseconds (1s => 10000000) -->
            <IntegerParameter Name="dirana_in_ramp_duration" Size="32" Signed="true" Min="0" Max="2100000000" Mapping="Control:dirana_in gain 1 Ramp Duration"/>
            <IntegerParameter Name="dirana_aux_in_ramp_duration" Size="32" Signed="true" Min="0" Max="2100000000" Mapping="Control:dirana_aux_in gain 4 Ramp Duration"/>
            <IntegerParameter Name="dirana_tuner_in_ramp_duration" Size="32" Signed="true" Min="0" Max="2100000000" Mapping="Control:dirana_tuner_in gain 5 Ramp Duration"/>

            <IntegerParameter Name="voice_volume" Size="32" Signed="true" Min="0" Max="1440" Mapping="Control:media_in gain 0 Ramp Duration">
                 <LogarithmicAdaptation LogarithmBase="2" FloorValue="0" SlopeNumerator="61" SlopeDenominator="1" Offset="1200"/>
            </IntegerParameter>
        </ComponentType>

    </ComponentLibrary>

    <InstanceDefinition>
        <Component Name="main_mixer" Type="MainMixerMatrix"/>
    </InstanceDefinition>
</Subsystem>
